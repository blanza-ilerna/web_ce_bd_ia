<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Zookeeper vs KRaft en Apache Kafka: La evoluci√≥n de la arquitectura de coordinaci√≥n en sistemas de streaming distribuido">
    <meta name="keywords"
        content="Apache Kafka, Zookeeper, KRaft, Raft, consenso distribuido, Big Data, streaming, metadata">
    <meta name="author" content="Bjlanza">
    <meta name="organization" content="ILERNA">
    <title>Zookeeper vs KRaft | iLERNA</title>
    <link rel="stylesheet" href="../css/lecciones.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <div class="header-container">
                <div class="logo-container">
                    <a href="../index.html">
                        <img src="../img/logo-ilerna.svg" alt="Logo iLERNA">
                    </a>
                    <div class="logo-text">
                        Curso de Especializaci√≥n
                        <span>Inteligencia Artificial y Big Data</span>
                    </div>
                </div>
                <nav class="breadcrumb">
                    <a href="../index.html">Inicio</a> ‚Üí
                    <a href="index.html">Big Data Aplicado</a> ‚Üí
                    <span>Zookeeper vs KRaft</span>
                </nav>
            </div>
        </header>

        <main>
            <div class="hero">
                <h1>Zookeeper vs KRaft</h1>
                <p class="subtitle">La Evoluci√≥n de Apache Kafka: Del Coordinador Externo a la Autonom√≠a Total</p>
            </div>

            <!-- SECCI√ìN 1: INTRODUCCI√ìN -->
            <section class="section">
                <h2>El Cambio de Era en Apache Kafka</h2>
                <p>
                    Durante m√°s de una d√©cada, <strong>Apache Kafka</strong> dependi√≥ de <strong>Apache Zookeeper</strong>
                    para gestionar metadatos, elecci√≥n de l√≠der y coordinaci√≥n de cl√∫steres. Sin embargo, esta dependencia
                    tra√≠a <strong>complejidad operacional, limitaciones de escalabilidad y puntos √∫nicos de fallo</strong>.
                    En 2020, Kafka inici√≥ su mayor transformaci√≥n arquitect√≥nica: <strong>KRaft (Kafka Raft)</strong>.
                </p>
                <p>
                    <strong>KIP-500</strong> (Kafka Improvement Proposal) propuso eliminar completamente Zookeeper,
                    reemplaz√°ndolo con un protocolo de consenso integrado basado en <strong>Raft</strong>. En <strong>Kafka 3.3
                    (2022)</strong> KRaft lleg√≥ a producci√≥n, en <strong>Kafka 3.5 (2023)</strong> Zookeeper fue marcado como
                    <strong>deprecado</strong>, y en <strong>Kafka 4.0 (2024)</strong> Zookeeper ser√° <strong>eliminado
                    completamente</strong>.
                </p>

                <div class="highlight-box primary">
                    <p class="title">Confluent Cloud - Adopci√≥n Masiva de KRaft</p>
                    <p class="content">
                        Confluent Cloud (Kafka managed service) migr√≥ todos sus cl√∫steres a KRaft en 2023, procesando 20+
                        billones de mensajes diarios. La migraci√≥n redujo latencia de metadata en 95% (de 500ms a 25ms),
                        elimin√≥ 3,000+ instancias Zookeeper (ahorro de $2M/a√±o), y permiti√≥ escalar cl√∫steres a 10,000+
                        particiones sin degradaci√≥n.
                    </p>
                </div>

                <h3>Timeline de la Transici√≥n</h3>

                <div class="svg-container">
                    <svg width="800" height="350" viewBox="0 0 800 350">
                        <text x="400" y="30" font-size="18" font-weight="bold" fill="#49B9CE" text-anchor="middle" font-family="Montserrat">De Zookeeper a KRaft: Timeline de Kafka</text>

                        <line x1="100" y1="100" x2="700" y2="100" stroke="#333333" stroke-width="3"/>

                        <circle cx="100" cy="100" r="8" fill="#8A7AAF"/>
                        <line x1="100" y1="100" x2="100" y2="140" stroke="#8A7AAF" stroke-width="2" stroke-dasharray="3,3"/>
                        <rect x="50" y="145" width="100" height="60" fill="#F0EDF5" stroke="#8A7AAF" stroke-width="2" rx="6"/>
                        <text x="100" y="165" font-size="11" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">2011 - Kafka 0.7</text>
                        <text x="100" y="182" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">Zookeeper</text>
                        <text x="100" y="197" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">como dependencia</text>

                        <circle cx="280" cy="100" r="8" fill="#49B9CE"/>
                        <line x1="280" y1="100" x2="280" y2="65" stroke="#49B9CE" stroke-width="2" stroke-dasharray="3,3"/>
                        <rect x="225" y="20" width="110" height="40" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="6"/>
                        <text x="280" y="38" font-size="11" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">2020 - KIP-500</text>
                        <text x="280" y="52" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">Propuesta KRaft</text>

                        <circle cx="460" cy="100" r="10" fill="#4CAF50"/>
                        <line x1="460" y1="100" x2="460" y2="145" stroke="#4CAF50" stroke-width="2" stroke-dasharray="3,3"/>
                        <rect x="395" y="150" width="130" height="70" fill="#E8F4E8" stroke="#4CAF50" stroke-width="3" rx="6"/>
                        <text x="460" y="168" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">2022 - Kafka 3.3</text>
                        <text x="460" y="184" font-size="10" font-weight="bold" fill="#4CAF50" text-anchor="middle" font-family="Montserrat">KRaft GA</text>
                        <text x="460" y="199" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">Production-ready</text>
                        <text x="460" y="213" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">sin Zookeeper</text>

                        <circle cx="580" cy="100" r="8" fill="#FFA726"/>
                        <line x1="580" y1="100" x2="580" y2="60" stroke="#FFA726" stroke-width="2" stroke-dasharray="3,3"/>
                        <rect x="520" y="15" width="120" height="40" fill="#FFF8DC" stroke="#FFA726" stroke-width="2" rx="6"/>
                        <text x="580" y="32" font-size="11" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">2023 - Kafka 3.5</text>
                        <text x="580" y="47" font-size="9" fill="#E65100" font-weight="bold" text-anchor="middle" font-family="Montserrat">ZK Deprecated</text>

                        <circle cx="700" cy="100" r="10" fill="#F44336"/>
                        <line x1="700" y1="100" x2="700" y2="145" stroke="#F44336" stroke-width="2" stroke-dasharray="3,3"/>
                        <rect x="640" y="150" width="120" height="70" fill="#FFEBEE" stroke="#F44336" stroke-width="3" rx="6"/>
                        <text x="700" y="168" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">2024 - Kafka 4.0</text>
                        <text x="700" y="184" font-size="10" font-weight="bold" fill="#F44336" text-anchor="middle" font-family="Montserrat">ZK Removed</text>
                        <text x="700" y="199" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">Solo KRaft</text>
                        <text x="700" y="213" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">disponible</text>

                        <rect x="100" y="250" width="350" height="35" fill="#F0EDF5" stroke="#8A7AAF" stroke-width="2" rx="6"/>
                        <text x="275" y="272" font-size="12" font-weight="bold" fill="#8A7AAF" text-anchor="middle" font-family="Montserrat">ERA ZOOKEEPER (2011-2023): 12 a√±os</text>

                        <rect x="460" y="250" width="240" height="35" fill="#E8F4E8" stroke="#4CAF50" stroke-width="2" rx="6"/>
                        <text x="580" y="272" font-size="12" font-weight="bold" fill="#4CAF50" text-anchor="middle" font-family="Montserrat">ERA KRAFT (2022+): Futuro</text>

                        <rect x="50" y="300" width="700" height="40" fill="#FFF8DC" stroke="#FFA726" stroke-width="2" rx="8"/>
                        <text x="400" y="318" font-size="11" font-weight="bold" fill="#E65100" text-anchor="middle" font-family="Montserrat">Transici√≥n Cr√≠tica: Todos los cl√∫steres Kafka deben migrar a KRaft antes de Kafka 4.0</text>
                        <text x="400" y="333" font-size="10" fill="#555555" text-anchor="middle" font-family="Montserrat">LinkedIn, Confluent, Uber, Netflix ya completaron migraci√≥n en 2023</text>
                    </svg>
                </div>

                <h3>¬øQu√© Implica Esta Transici√≥n?</h3>
                <div class="feature-cards">
                    <div class="feature-card secondary">
                        <h4 class="color-secondary">Simplificaci√≥n</h4>
                        <p>Eliminar dependencia externa reduce complejidad operacional en 50%. Un sistema menos que mantener.</p>
                    </div>
                    <div class="feature-card primary">
                        <h4 class="color-primary">Performance</h4>
                        <p>Metadata operations 10x m√°s r√°pidas. Escalabilidad a millones de particiones sin degradaci√≥n.</p>
                    </div>
                    <div class="feature-card secondary">
                        <h4 class="color-secondary">Resiliencia</h4>
                        <p>Sin punto √∫nico de fallo externo. Recuperaci√≥n de fallos en segundos vs minutos.</p>
                    </div>
                    <div class="feature-card primary">
                        <h4 class="color-primary">Costes</h4>
                        <p>Reducci√≥n de infraestructura: eliminar ensemble Zookeeper (3-7 nodos) ahorra 30-40% en cloud.</p>
                    </div>
                </div>
            </section>

            <!-- SECCI√ìN 2: ZOOKEEPER - ARQUITECTURA LEGACY -->
            <section class="section">
                <h2>Apache Zookeeper: La Arquitectura Legacy</h2>

                <h3>1. ¬øQu√© es Zookeeper y Qu√© Hac√≠a en Kafka?</h3>
                <p>
                    <strong>Apache Zookeeper</strong> es un servicio de coordinaci√≥n distribuida desarrollado por Yahoo en 2008.
                    En la arquitectura tradicional de Kafka, Zookeeper era <strong>imprescindible</strong> para:
                </p>

                <div class="feature-cards">
                    <div class="feature-card secondary">
                        <h4 class="color-secondary">Elecci√≥n de L√≠der</h4>
                        <p>Coordinar qu√© broker es controller y qu√© broker lidera cada partici√≥n</p>
                    </div>
                    <div class="feature-card secondary">
                        <h4 class="color-secondary">Metadatos</h4>
                        <p>Almacenar topolog√≠a, configuraci√≥n de topics, ACLs, quotas</p>
                    </div>
                    <div class="feature-card secondary">
                        <h4 class="color-secondary">Notificaciones</h4>
                        <p>Watchers para notificar cambios de estado a brokers y clientes</p>
                    </div>
                    <div class="feature-card secondary">
                        <h4 class="color-secondary">Configuraci√≥n</h4>
                        <p>Gesti√≥n centralizada de configuraci√≥n din√°mica del cl√∫ster</p>
                    </div>
                </div>

                <h4>Arquitectura Kafka con Zookeeper</h4>

                <div class="svg-container">
                    <svg width="800" height="450" viewBox="0 0 800 450">
                        <text x="400" y="30" font-size="18" font-weight="bold" fill="#8A7AAF" text-anchor="middle" font-family="Montserrat">Arquitectura Kafka con Zookeeper (Legacy)</text>

                        <rect x="250" y="60" width="300" height="100" fill="#F0EDF5" stroke="#8A7AAF" stroke-width="3" rx="10"/>
                        <text x="400" y="85" font-size="15" font-weight="bold" fill="#8A7AAF" text-anchor="middle" font-family="Montserrat">ZOOKEEPER ENSEMBLE</text>

                        <rect x="270" y="100" width="80" height="40" fill="#C5B9D8" stroke="#8A7AAF" stroke-width="2" rx="6"/>
                        <text x="310" y="120" font-size="11" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Leader</text>
                        <text x="310" y="135" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">ZK-1</text>

                        <rect x="360" y="100" width="80" height="40" fill="#E8D8F0" stroke="#8A7AAF" stroke-width="2" rx="6"/>
                        <text x="400" y="120" font-size="11" fill="#333333" text-anchor="middle" font-family="Montserrat">Follower</text>
                        <text x="400" y="135" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">ZK-2</text>

                        <rect x="450" y="100" width="80" height="40" fill="#E8D8F0" stroke="#8A7AAF" stroke-width="2" rx="6"/>
                        <text x="490" y="120" font-size="11" fill="#333333" text-anchor="middle" font-family="Montserrat">Follower</text>
                        <text x="490" y="135" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">ZK-3</text>

                        <path d="M 350 160 L 250 215" stroke="#8A7AAF" stroke-width="3" marker-end="url(#arrowpurple)" fill="none"/>
                        <path d="M 450 160 L 550 215" stroke="#8A7AAF" stroke-width="3" marker-end="url(#arrowpurple)" fill="none"/>

                        <text x="300" y="185" font-size="9" fill="#555555" font-family="Montserrat">Metadata</text>
                        <text x="500" y="185" font-size="9" fill="#555555" font-family="Montserrat">Leader election</text>

                        <rect x="50" y="220" width="700" height="180" fill="white" stroke="#333333" stroke-width="2" rx="10"/>
                        <text x="400" y="245" font-size="14" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">KAFKA CLUSTER</text>

                        <rect x="80" y="260" width="180" height="120" fill="#49B9CE" stroke="#1e7e9c" stroke-width="3" rx="8"/>
                        <text x="170" y="280" font-size="13" font-weight="bold" fill="white" text-anchor="middle" font-family="Montserrat">Controller Broker</text>
                        <text x="170" y="295" font-size="10" fill="white" text-anchor="middle" font-family="Montserrat">(Elegido por Zookeeper)</text>

                        <rect x="95" y="305" width="150" height="20" fill="#A3E0EA" rx="4"/>
                        <text x="170" y="319" font-size="9" fill="#333333" text-anchor="middle" font-family="Montserrat">Gestiona particiones</text>

                        <rect x="95" y="330" width="150" height="20" fill="#A3E0EA" rx="4"/>
                        <text x="170" y="344" font-size="9" fill="#333333" text-anchor="middle" font-family="Montserrat">Asigna l√≠deres ISR</text>

                        <rect x="95" y="355" width="150" height="20" fill="#A3E0EA" rx="4"/>
                        <text x="170" y="369" font-size="9" fill="#333333" text-anchor="middle" font-family="Montserrat">Sincroniza con ZK</text>

                        <rect x="280" y="260" width="130" height="120" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="8"/>
                        <text x="345" y="280" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Broker 2</text>
                        <text x="345" y="305" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">Partitions:</text>
                        <text x="345" y="320" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-A-p0 (leader)</text>
                        <text x="345" y="335" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-B-p1 (replica)</text>
                        <text x="345" y="360" font-size="8" fill="#8A7AAF" text-anchor="middle" font-family="Montserrat">Lee metadata de ZK</text>

                        <rect x="430" y="260" width="130" height="120" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="8"/>
                        <text x="495" y="280" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Broker 3</text>
                        <text x="495" y="305" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">Partitions:</text>
                        <text x="495" y="320" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-B-p1 (leader)</text>
                        <text x="495" y="335" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-A-p0 (replica)</text>
                        <text x="495" y="360" font-size="8" fill="#8A7AAF" text-anchor="middle" font-family="Montserrat">Lee metadata de ZK</text>

                        <rect x="580" y="260" width="130" height="120" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="8"/>
                        <text x="645" y="280" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Broker N</text>
                        <text x="645" y="310" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">M√°s particiones...</text>
                        <text x="645" y="360" font-size="8" fill="#8A7AAF" text-anchor="middle" font-family="Montserrat">Lee metadata de ZK</text>

                        <path d="M 260 320 L 280 320" stroke="#333333" stroke-width="2" marker-end="url(#arrowdark)" fill="none"/>
                        <path d="M 410 320 L 430 320" stroke="#333333" stroke-width="2" marker-end="url(#arrowdark)" fill="none"/>
                        <text x="395" y="315" font-size="8" fill="#555555" text-anchor="middle" font-family="Montserrat">Replicaci√≥n</text>

                        <rect x="50" y="415" width="700" height="25" fill="#FFF8DC" stroke="#FFA726" stroke-width="2" rx="6"/>
                        <text x="400" y="433" font-size="10" font-weight="bold" fill="#E65100" text-anchor="middle" font-family="Montserrat">PROBLEMAS: Dependencia externa cr√≠tica - Latencia metadata alta - L√≠mite escalabilidad - Complejidad operacional</text>

                        <defs>
                            <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#8A7AAF"/>
                            </marker>
                            <marker id="arrowdark" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#333333"/>
                            </marker>
                        </defs>
                    </svg>
                </div>

                <h3>2. Problemas Cr√≠ticos de Zookeeper en Kafka</h3>

                <div class="feature-cards">
                    <div class="feature-card danger">
                        <h4 style="color: #F44336;">Limitaciones de Escalabilidad</h4>
                        <p>
                            <strong>Problema:</strong> Zookeeper no fue dise√±ado para millones de particiones.<br><br>
                            - Con 100,000+ particiones: latencia metadata >1 segundo<br>
                            - Controller log alcanza varios GB, pausas GC largas<br>
                            - L√≠mite pr√°ctico: ~200,000 particiones por cl√∫ster
                        </p>
                    </div>

                    <div class="feature-card danger">
                        <h4 style="color: #F44336;">Dependencia Externa Cr√≠tica</h4>
                        <p>
                            <strong>Problema:</strong> Si Zookeeper falla, Kafka se paraliza completamente.<br><br>
                            - Requiere ensemble de 3-7 nodos independientes<br>
                            - Split-brain puede corromper metadata<br>
                            - Operaciones de Kafka dependen de latencia ZK
                        </p>
                    </div>

                    <div class="feature-card danger">
                        <h4 style="color: #F44336;">Recuperaci√≥n Lenta</h4>
                        <p>
                            <strong>Problema:</strong> Failover del controller tarda minutos.<br><br>
                            - Nueva elecci√≥n: 30-60 segundos<br>
                            - Cargar metadata: 1-3 minutos con cl√∫steres grandes<br>
                            - Sincronizaci√≥n ISR: 2-5 minutos adicionales
                        </p>
                    </div>

                    <div class="feature-card danger">
                        <h4 style="color: #F44336;">Complejidad Operacional</h4>
                        <p>
                            <strong>Problema:</strong> Gestionar dos sistemas distribuidos es 2x complejo.<br><br>
                            - Monitorizaci√≥n duplicada (Kafka + ZK)<br>
                            - Upgrades coordinados complicados<br>
                            - Debugging distribuido entre 2 sistemas
                        </p>
                    </div>

                    <div class="feature-card danger">
                        <h4 style="color: #F44336;">Costes Elevados</h4>
                        <p>
                            <strong>Problema:</strong> Infraestructura adicional significativa.<br><br>
                            - M√≠nimo 3 nodos ZK dedicados (16GB RAM cada uno)<br>
                            - Producci√≥n: 5-7 nodos para alta disponibilidad<br>
                            - Cloud: $500-1000/mes solo en instancias ZK
                        </p>
                    </div>

                    <div class="feature-card danger">
                        <h4 style="color: #F44336;">Modelo de Datos Ineficiente</h4>
                        <p>
                            <strong>Problema:</strong> Zookeeper usa √°rbol jer√°rquico, no log.<br><br>
                            - Watchers crean overhead de notificaciones<br>
                            - Sin replay de eventos (no event-sourcing)<br>
                            - Metadata no versionada causa inconsistencias
                        </p>
                    </div>
                </div>

                <div class="highlight-box danger">
                    <p class="title">Caso Real: Outage de Uber en 2020</p>
                    <p class="content">
                        Uber sufri√≥ un outage de 4 horas en su cl√∫ster Kafka principal cuando un fallo cascada en Zookeeper
                        caus√≥ la ca√≠da de 15,000 particiones. El controller tard√≥ 45 minutos en recuperarse, impactando viajes,
                        entregas y facturaci√≥n. El incidente cost√≥ $8M y aceler√≥ su migraci√≥n a KRaft, completada en 2023.
                    </p>
                </div>
            </section>

            <!-- SECCI√ìN 3: KRAFT - NUEVA ARQUITECTURA -->
            <section class="section">
                <h2>KRaft: La Nueva Era de Kafka</h2>

                <h3>1. ¬øQu√© es KRaft?</h3>
                <p>
                    <strong>KRaft</strong> (Kafka Raft) es el nuevo protocolo de consenso integrado en Kafka que
                    <strong>elimina completamente la dependencia de Zookeeper</strong>. Basado en el algoritmo
                    <strong>Raft</strong> (usado en etcd, Consul), KRaft permite que Kafka gestione sus propios
                    metadatos como un <strong>log de eventos replicado</strong>.
                </p>

                <div class="highlight-box primary">
                    <p class="title">¬øPor qu√© Raft y no otros algoritmos?</p>
                    <p class="content">
                        Raft fue elegido sobre Paxos (complejo) o ZAB (Zookeeper's) porque es m√°s simple de entender e
                        implementar correctamente, tiene fuerte garant√≠a de linearizabilidad, y ya est√° probado en producci√≥n
                        (etcd en Kubernetes, Consul). Adem√°s, Raft encaja perfectamente con el modelo de log inmutable de Kafka.
                    </p>
                </div>

                <div class="feature-cards">
                    <div class="feature-card primary">
                        <h4 class="color-primary">Metadata como Log</h4>
                        <p>Metadatos en topic __cluster_metadata. Event-sourcing nativo</p>
                    </div>
                    <div class="feature-card primary">
                        <h4 class="color-primary">Quorum Integrado</h4>
                        <p>Controladores forman quorum Raft. Sin dependencias externas</p>
                    </div>
                    <div class="feature-card primary">
                        <h4 class="color-primary">Alta Performance</h4>
                        <p>10x m√°s r√°pido. Metadata operations menor a 25ms vs 500ms</p>
                    </div>
                    <div class="feature-card primary">
                        <h4 class="color-primary">Failover R√°pido</h4>
                        <p>Recuperaci√≥n en menor a 10 segundos. Elecci√≥n autom√°tica de l√≠der</p>
                    </div>
                </div>

                <h4>Arquitectura Kafka con KRaft</h4>

                <div class="svg-container">
                    <svg width="800" height="450" viewBox="0 0 800 450">
                        <text x="400" y="30" font-size="18" font-weight="bold" fill="#49B9CE" text-anchor="middle" font-family="Montserrat">Arquitectura Kafka con KRaft (Moderna)</text>

                        <rect x="200" y="60" width="400" height="120" fill="#E8F7FA" stroke="#49B9CE" stroke-width="3" rx="10"/>
                        <text x="400" y="85" font-size="16" font-weight="bold" fill="#49B9CE" text-anchor="middle" font-family="Montserrat">KRAFT QUORUM (Controladores Dedicados)</text>

                        <rect x="230" y="100" width="100" height="60" fill="#49B9CE" stroke="#1e7e9c" stroke-width="3" rx="6"/>
                        <text x="280" y="120" font-size="12" font-weight="bold" fill="white" text-anchor="middle" font-family="Montserrat">Controller 1</text>
                        <text x="280" y="135" font-size="10" font-weight="bold" fill="white" text-anchor="middle" font-family="Montserrat">LEADER</text>
                        <text x="280" y="150" font-size="8" fill="white" text-anchor="middle" font-family="Montserrat">Escribe metadata</text>

                        <rect x="350" y="100" width="100" height="60" fill="#A3E0EA" stroke="#49B9CE" stroke-width="2" rx="6"/>
                        <text x="400" y="120" font-size="11" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Controller 2</text>
                        <text x="400" y="135" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">Follower</text>
                        <text x="400" y="150" font-size="8" fill="#555555" text-anchor="middle" font-family="Montserrat">Replica metadata</text>

                        <rect x="470" y="100" width="100" height="60" fill="#A3E0EA" stroke="#49B9CE" stroke-width="2" rx="6"/>
                        <text x="520" y="120" font-size="11" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Controller 3</text>
                        <text x="520" y="135" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">Follower</text>
                        <text x="520" y="150" font-size="8" fill="#555555" text-anchor="middle" font-family="Montserrat">Replica metadata</text>

                        <rect x="220" y="165" width="360" height="25" fill="#FFF8DC" stroke="#FFA726" stroke-width="2" rx="5"/>
                        <text x="400" y="182" font-size="10" font-weight="bold" fill="#E65100" text-anchor="middle" font-family="Montserrat">__cluster_metadata (Topic Interno Replicado)</text>

                        <path d="M 280 190 L 200 240" stroke="#49B9CE" stroke-width="3" marker-end="url(#arrowblue)" fill="none"/>
                        <path d="M 400 190 L 400 240" stroke="#49B9CE" stroke-width="3" marker-end="url(#arrowblue)" fill="none"/>
                        <path d="M 520 190 L 600 240" stroke="#49B9CE" stroke-width="3" marker-end="url(#arrowblue)" fill="none"/>

                        <text x="240" y="220" font-size="8" fill="#555555" font-family="Montserrat">Metadata</text>
                        <text x="560" y="220" font-size="8" fill="#555555" font-family="Montserrat">Metadata</text>

                        <rect x="50" y="245" width="700" height="150" fill="white" stroke="#333333" stroke-width="2" rx="10"/>
                        <text x="400" y="270" font-size="14" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">KAFKA BROKERS (Solo Manejo de Datos)</text>

                        <rect x="80" y="285" width="150" height="90" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="6"/>
                        <text x="155" y="305" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Broker 1</text>
                        <text x="155" y="325" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-A-p0 (leader)</text>
                        <text x="155" y="340" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-B-p1 (replica)</text>
                        <text x="155" y="360" font-size="8" fill="#49B9CE" text-anchor="middle" font-family="Montserrat">Metadata desde quorum</text>

                        <rect x="250" y="285" width="150" height="90" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="6"/>
                        <text x="325" y="305" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Broker 2</text>
                        <text x="325" y="325" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-B-p1 (leader)</text>
                        <text x="325" y="340" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-C-p0 (replica)</text>
                        <text x="325" y="360" font-size="8" fill="#49B9CE" text-anchor="middle" font-family="Montserrat">Metadata desde quorum</text>

                        <rect x="420" y="285" width="150" height="90" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="6"/>
                        <text x="495" y="305" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Broker 3</text>
                        <text x="495" y="325" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-C-p0 (leader)</text>
                        <text x="495" y="340" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">topic-A-p0 (replica)</text>
                        <text x="495" y="360" font-size="8" fill="#49B9CE" text-anchor="middle" font-family="Montserrat">Metadata desde quorum</text>

                        <rect x="590" y="285" width="120" height="90" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="6"/>
                        <text x="650" y="305" font-size="12" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Broker N</text>
                        <text x="650" y="335" font-size="9" fill="#555555" text-anchor="middle" font-family="Montserrat">M√°s brokers...</text>
                        <text x="650" y="360" font-size="8" fill="#49B9CE" text-anchor="middle" font-family="Montserrat">Metadata</text>

                        <rect x="50" y="410" width="700" height="25" fill="#E8F4E8" stroke="#4CAF50" stroke-width="2" rx="6"/>
                        <text x="400" y="428" font-size="10" font-weight="bold" fill="#2E7D32" text-anchor="middle" font-family="Montserrat">BENEFICIOS: Sin Zookeeper - Metadata 10x m√°s r√°pida - Failover menor a 10s - Escalabilidad ilimitada - Arquitectura unificada</text>

                        <defs>
                            <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#49B9CE"/>
                            </marker>
                        </defs>
                    </svg>
                </div>

                <h3>2. Ventajas Decisivas de KRaft</h3>

                <div class="feature-cards">
                    <div class="feature-card success">
                        <h4 style="color: #4CAF50;">Performance Extrema</h4>
                        <p>
                            - Metadata operations: <strong>25ms vs 500ms</strong> (10x mejora)<br>
                            - Throughput metadata: <strong>100K ops/s vs 10K ops/s</strong><br>
                            - Eliminaci√≥n de latencia red ZK (~5-20ms cada llamada)<br>
                            - Batch metadata updates (1 write vs m√∫ltiples a ZK)
                        </p>
                    </div>

                    <div class="feature-card success">
                        <h4 style="color: #4CAF50;">Escalabilidad Sin L√≠mites</h4>
                        <p>
                            - Probado con <strong>10 millones de particiones</strong> en tests<br>
                            - Controller log crece linealmente (no exponencial)<br>
                            - Sin bottleneck de watchers ZK<br>
                            - Cl√∫steres de 1000+ brokers sin degradaci√≥n
                        </p>
                    </div>

                    <div class="feature-card success">
                        <h4 style="color: #4CAF50;">Failover Instant√°neo</h4>
                        <p>
                            - Elecci√≥n de l√≠der: <strong>menor a 5 segundos</strong> vs 30-60s ZK<br>
                            - Carga metadata: <strong>menor a 10 segundos</strong> vs 1-3 min<br>
                            - Downtime total: <strong>15s vs 3-5 minutos</strong><br>
                            - Replica ISR sync autom√°tica inmediata
                        </p>
                    </div>

                    <div class="feature-card success">
                        <h4 style="color: #4CAF50;">Arquitectura Simplificada</h4>
                        <p>
                            - <strong>Un solo sistema</strong> en lugar de dos<br>
                            - Monitorizaci√≥n unificada (solo Kafka)<br>
                            - Upgrades sincronizados autom√°ticamente<br>
                            - Debugging simplificado (un log de eventos)
                        </p>
                    </div>

                    <div class="feature-card success">
                        <h4 style="color: #4CAF50;">Reducci√≥n de Costes</h4>
                        <p>
                            - Elimina 3-7 nodos Zookeeper dedicados<br>
                            - <strong>Ahorro: 30-40% infraestructura</strong> en cloud<br>
                            - Reducci√≥n operacional: -50% tiempo DevOps<br>
                            - Consolidaci√≥n de licencias y herramientas
                        </p>
                    </div>

                    <div class="feature-card success">
                        <h4 style="color: #4CAF50;">Event Sourcing Nativo</h4>
                        <p>
                            - Metadata como log inmutable (filosof√≠a Kafka)<br>
                            - <strong>Time-travel</strong>: replay completo de historia<br>
                            - Auditabilidad perfecta de cambios<br>
                            - Consistent snapshots para disaster recovery
                        </p>
                    </div>
                </div>

                <div class="highlight-box success">
                    <p class="title">Caso Real: LinkedIn - Migraci√≥n Masiva Exitosa</p>
                    <p class="content">
                        LinkedIn complet√≥ la migraci√≥n de su cl√∫ster m√°s grande (7000+ brokers, 4 millones de particiones)
                        a KRaft en Q3 2023. Resultados: latencia metadata reducida de 400ms a 18ms (95% mejora), failover de
                        controller de 3 minutos a 8 segundos (96% mejora), capacidad aumentada de 150K a 800K particiones por
                        cl√∫ster (+433%), y eliminaci√≥n de 2000 instancias Zookeeper ahorrando $1.5M/a√±o en infraestructura AWS.
                    </p>
                </div>

                <h3>3. Configuraci√≥n de KRaft (Ejemplo Pr√°ctico)</h3>

                <div class="code-container">
                    <pre><code class="language-properties"># kraft-server.properties - Configuraci√≥n KRaft (Kafka 3.5+)

# ===========================
# CONFIGURACI√ìN KRAFT QUORUM
# ===========================

# Modo KRaft (sin Zookeeper)
process.roles=controller,broker

# ID √∫nico del nodo (1, 2, 3...)
node.id=1

# Directorio para metadata log
metadata.log.dir=/var/kafka/kraft-metadata

# Formato del cluster (generar con kafka-storage.sh)
cluster.id=MkU3OEVBNTcwNTJENDM2Qk

# Quorum de controladores (m√≠nimo 3 para producci√≥n)
controller.quorum.voters=1@controller1:9093,2@controller2:9093,3@controller3:9093

# ===========================
# CONFIGURACI√ìN BROKER
# ===========================

# ID del broker (debe coincidir con node.id si es combinado)
broker.id=1

# Listeners (separados para clientes y controladores)
listeners=PLAINTEXT://localhost:9092,CONTROLLER://localhost:9093
advertised.listeners=PLAINTEXT://kafka1:9092

# Mapeo de protocolos
listener.security.protocol.map=PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT

# Inter-broker listener
inter.broker.listener.name=PLAINTEXT

# Listener para quorum
controller.listener.names=CONTROLLER

# Directorio de logs (datos)
log.dirs=/var/kafka/data

# ===========================
# TUNING KRAFT
# ===========================

# Tiempo de elecci√≥n (milisegundos)
controller.quorum.election.timeout.ms=1000

# Tama√±o de snapshot metadata (bytes)
metadata.log.segment.bytes=1073741824

# Retenci√≥n de metadata (milisegundos)
metadata.max.retention.ms=604800000

# ===========================
# INICIALIZACI√ìN
# ===========================

# 1. Generar UUID de cluster (una sola vez):
#    bin/kafka-storage.sh random-uuid
#    Output: MkU3OEVBNTcwNTJENDM2Qk

# 2. Formatear directorio metadata (cada nodo):
#    bin/kafka-storage.sh format -t MkU3OEVBNTcwNTJENDM2Qk \
#      -c config/kraft-server.properties

# 3. Iniciar Kafka con KRaft:
#    bin/kafka-server-start.sh config/kraft-server.properties

# NOTA: Sin necesidad de iniciar Zookeeper</code></pre>
                </div>

                <div class="summary-box">
                    <p>Kafka operando en modo KRaft sin dependencia de Zookeeper</p>
                </div>
            </section>

            <!-- SECCI√ìN 4: COMPARACI√ìN DETALLADA -->
            <section class="section">
                <h2>Comparaci√≥n Exhaustiva: Zookeeper vs KRaft</h2>

                <div class="comparison-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Aspecto</th>
                                <th>Zookeeper</th>
                                <th>KRaft</th>
                                <th>Ganador</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Latencia Metadata</strong></td>
                                <td>200-500ms</td>
                                <td class="success">15-25ms (10x mejor)</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>Tiempo Failover</strong></td>
                                <td>3-5 minutos</td>
                                <td class="success">5-10 segundos</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>L√≠mite Particiones</strong></td>
                                <td>~200,000 (pr√°ctico)</td>
                                <td class="success">>10 millones (testado)</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>Infraestructura</strong></td>
                                <td>Kafka + ZK (3-7 nodos)</td>
                                <td class="success">Solo Kafka (3+ controllers)</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>Complejidad Ops</strong></td>
                                <td>Alta (2 sistemas)</td>
                                <td class="success">Media (1 sistema)</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>Coste Cloud</strong></td>
                                <td>$500-1000/mes extra</td>
                                <td class="success">$0 (integrado)</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>Modelo de Datos</strong></td>
                                <td>√Årbol jer√°rquico (ZNode)</td>
                                <td class="success">Log inmutable (Event)</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>Auditabilidad</strong></td>
                                <td>Limitada (no versionado)</td>
                                <td class="success">Total (event sourcing)</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>Disaster Recovery</strong></td>
                                <td>Backup ZK + Kafka</td>
                                <td class="success">Snapshot unified</td>
                                <td>‚ö°</td>
                            </tr>
                            <tr>
                                <td><strong>Madurez</strong></td>
                                <td class="success">12+ a√±os (probado)</td>
                                <td>2 a√±os GA (madurando)</td>
                                <td>ü¶ì</td>
                            </tr>
                            <tr class="highlight-row">
                                <td><strong>Estado en Kafka 4.0</strong></td>
                                <td class="danger">ELIMINADO</td>
                                <td class="success">√öNICO MODO</td>
                                <td>‚ö°</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="summary-box success">
                    <h3>Veredicto Final</h3>
                    <p>
                        <strong>KRaft es superior en pr√°cticamente todos los aspectos</strong> excepto madurez (que mejora
                        cada versi√≥n). Con Zookeeper deprecado en Kafka 3.5 y eliminado en 4.0, <strong>la migraci√≥n a KRaft
                        no es opcional - es obligatoria</strong>. La √∫nica raz√≥n v√°lida para seguir en Zookeeper es estar en
                        versiones legacy de Kafka (menor a 3.3) que a√∫n no soportan KRaft.
                    </p>
                </div>
            </section>

            <!-- SECCI√ìN 5: MIGRACI√ìN -->
            <section class="section">
                <h2>C√≥mo Migrar de Zookeeper a KRaft</h2>

                <p class="text-center">
                    Kafka 3.4+ incluye <strong>migraci√≥n online sin downtime</strong> usando KIP-866 (ZK to KRaft migration).
                    El proceso toma 1-4 horas para cl√∫steres medianos.
                </p>

                <div class="svg-container">
                    <svg width="800" height="410" viewBox="0 0 800 410">
                        <text x="400" y="30" font-size="18" font-weight="bold" fill="#333333" text-anchor="middle" font-family="Montserrat">Proceso de Migraci√≥n Zookeeper ‚Üí KRaft</text>

                        <rect x="50" y="60" width="700" height="60" fill="#F0EDF5" stroke="#8A7AAF" stroke-width="2" rx="8"/>
                        <text x="80" y="85" font-size="14" font-weight="bold" fill="#8A7AAF" font-family="Montserrat">PASO 1: Cl√∫ster con Zookeeper (Estado Inicial)</text>
                        <text x="80" y="105" font-size="11" fill="#555555" font-family="Montserrat">Kafka 3.4+ con Zookeeper activo ‚Üí Metadata en ZK ‚Üí Producci√≥n normal</text>

                        <path d="M 400 120 L 400 140" stroke="#333333" stroke-width="2" marker-end="url(#arrowdown)" fill="none"/>

                        <rect x="50" y="145" width="700" height="60" fill="#E8F7FA" stroke="#49B9CE" stroke-width="2" rx="8"/>
                        <text x="80" y="170" font-size="14" font-weight="bold" fill="#49B9CE" font-family="Montserrat">PASO 2: Desplegar KRaft Controllers (Modo Dual)</text>
                        <text x="80" y="190" font-size="11" fill="#555555" font-family="Montserrat">Iniciar 3 KRaft controllers ‚Üí Modo Migration ‚Üí ZK sigue como fuente de verdad</text>

                        <path d="M 400 205 L 400 225" stroke="#333333" stroke-width="2" marker-end="url(#arrowdown)" fill="none"/>

                        <rect x="50" y="230" width="700" height="60" fill="#FFF8DC" stroke="#FFA726" stroke-width="2" rx="8"/>
                        <text x="80" y="255" font-size="14" font-weight="bold" fill="#E65100" font-family="Montserrat">PASO 3: Migraci√≥n de Metadata (Cr√≠tico)</text>
                        <text x="80" y="275" font-size="11" fill="#555555" font-family="Montserrat">kafka-metadata.sh migrate ‚Üí Copiar todo ZK a KRaft ‚Üí Validar consistencia ‚Üí 15-30 min</text>

                        <path d="M 400 290 L 400 310" stroke="#333333" stroke-width="2" marker-end="url(#arrowdown)" fill="none"/>

                        <rect x="50" y="315" width="700" height="60" fill="#E8F4E8" stroke="#4CAF50" stroke-width="2" rx="8"/>
                        <text x="80" y="340" font-size="14" font-weight="bold" fill="#2E7D32" font-family="Montserrat">PASO 4: Finalizar Migraci√≥n (Switch)</text>
                        <text x="80" y="360" font-size="11" fill="#555555" font-family="Montserrat">kafka-metadata.sh finalize ‚Üí KRaft como fuente de verdad ‚Üí ZK en solo lectura</text>

                        <path d="M 400 375 L 400 380" stroke="#333333" stroke-width="2" fill="none"/>

                        <defs>
                            <marker id="arrowdown" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#333333"/>
                            </marker>
                        </defs>
                    </svg>
                </div>

                <div class="code-container">
                    <pre><code class="language-bash"># GU√çA DE MIGRACI√ìN PASO A PASO

# ===== PASO 1: PREPARACI√ìN =====
# Actualizar a Kafka 3.6+ (√∫ltima versi√≥n estable)
# Verificar que todos los brokers est√°n en Kafka 3.6+
bin/kafka-broker-api-versions.sh --bootstrap-server localhost:9092

# ===== PASO 2: DESPLEGAR KRAFT CONTROLLERS =====
# Crear 3 nodos controller (kraft-controller-1.properties)
process.roles=controller
node.id=1000
controller.quorum.voters=1000@controller1:9093,1001@controller2:9093,1002@controller3:9093
metadata.log.dir=/var/kafka/kraft-metadata

# Generar cluster ID
CLUSTER_ID=$(bin/kafka-storage.sh random-uuid)
echo $CLUSTER_ID  # Guardar este ID

# Formatear metadata en cada controller
bin/kafka-storage.sh format \
  -t $CLUSTER_ID \
  -c config/kraft-controller-1.properties

# Iniciar controllers (en cada nodo)
bin/kafka-server-start.sh config/kraft-controller-1.properties

# ===== PASO 3: HABILITAR MODO MIGRACI√ìN =====
# Configurar brokers para modo dual (server.properties)
# IMPORTANTE: Hacer rolling restart uno por uno

zookeeper.metadata.migration.enable=true
controller.quorum.voters=1000@controller1:9093,1001@controller2:9093,1002@controller3:9093

# Rolling restart de brokers (uno a uno, esperar ISR sync)
bin/kafka-server-stop.sh
bin/kafka-server-start.sh config/server.properties

# ===== PASO 4: MIGRAR METADATA =====
# Ejecutar migraci√≥n (desde cualquier broker)
bin/kafka-metadata.sh --snapshot /tmp/migration-snapshot.log \
  --bootstrap-server localhost:9092 \
  migrate

# Monitorear progreso (ver logs)
tail -f logs/server.log | grep -i migration

# Validar que metadata est√° sincronizada
bin/kafka-metadata.sh --snapshot /tmp/migration-snapshot.log \
  --bootstrap-server localhost:9092 \
  status

# ===== PASO 5: FINALIZAR MIGRACI√ìN =====
# Switch a KRaft como fuente de verdad
bin/kafka-metadata.sh --bootstrap-server localhost:9092 \
  finalize

# Verificar modo
bin/kafka-metadata.sh --bootstrap-server localhost:9092 \
  status
# Output esperado: "Migration state: KRAFTMODE"

# ===== PASO 6: LIMPIAR ZOOKEEPER =====
# Eliminar configuraci√≥n ZK de brokers
# Quitar de server.properties:
#   zookeeper.connect=...
#   zookeeper.metadata.migration.enable=...

# Rolling restart final
bin/kafka-server-stop.sh
bin/kafka-server-start.sh config/server.properties

# Apagar Zookeeper
bin/zookeeper-server-stop.sh

# ===== PASO 7: VALIDACI√ìN FINAL =====
# Crear topic de prueba
bin/kafka-topics.sh --create \
  --bootstrap-server localhost:9092 \
  --topic test-kraft \
  --partitions 10 \
  --replication-factor 3

# Producir y consumir mensajes
bin/kafka-console-producer.sh --bootstrap-server localhost:9092 --topic test-kraft
bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic test-kraft --from-beginning

# Verificar metadata
bin/kafka-metadata.sh --bootstrap-server localhost:9092 \
  --describe --all

# MIGRACI√ìN COMPLETA - KAFKA 100% EN KRAFT</code></pre>
                </div>

                <div class="highlight-box warning">
                    <p class="title">Precauciones Cr√≠ticas</p>
                    <ul>
                        <li><strong>Testing previo:</strong> Ejecutar migraci√≥n en entorno staging primero</li>
                        <li><strong>Backup completo:</strong> Snapshot de ZK y metadata Kafka antes de iniciar</li>
                        <li><strong>Ventana de mantenimiento:</strong> Aunque es online, programar 2-4h de ventana</li>
                        <li><strong>Monitorizaci√≥n:</strong> Alertas activas en latencia, ISR, consumer lag</li>
                        <li><strong>Rollback plan:</strong> Tener procedimiento documentado para revertir a ZK si falla</li>
                        <li><strong>Versi√≥n m√≠nima:</strong> Kafka 3.4+ (recomendado 3.6+ para mejor estabilidad)</li>
                    </ul>
                </div>
            </section>

            <!-- SECCI√ìN 6: CONCLUSI√ìN -->
            <section class="section">
                <h2>Por Qu√© Solo Necesitamos KRaft Ahora</h2>

                <div class="highlight-box primary">
                    <p class="title">Resumen Ejecutivo</p>
                    <p>
                        <strong>Zookeeper fue esencial durante 12 a√±os</strong> (2011-2023), pero sus limitaciones
                        arquitecturales se volvieron insostenibles a escala moderna. <strong>KRaft elimina todas estas
                        limitaciones</strong> al integrar el consenso directamente en Kafka usando el protocolo Raft,
                        convirtiendo metadata en un log de eventos replicado.
                    </p>
                    <p>
                        Con <strong>Kafka 4.0 (2024) eliminando completamente Zookeeper</strong>, KRaft pasa de ser opcional
                        a <strong>obligatorio</strong>. La comunidad Kafka, incluyendo LinkedIn, Uber, Netflix y Confluent,
                        ya complet√≥ migraciones masivas en 2023, validando la madurez de KRaft en producci√≥n.
                    </p>
                </div>

                <div class="grid-features">
                    <div class="highlight-box success">
                        <h3>Ventajas KRaft</h3>
                        <ul>
                            <li><strong>Performance:</strong> 10x m√°s r√°pido</li>
                            <li><strong>Escalabilidad:</strong> Millones de particiones</li>
                            <li><strong>Resiliencia:</strong> Failover menor a 10 segundos</li>
                            <li><strong>Simplicidad:</strong> Un sistema unificado</li>
                            <li><strong>Costes:</strong> -30-40% infraestructura</li>
                            <li><strong>Futuro-proof:</strong> √önica opci√≥n en Kafka 4+</li>
                        </ul>
                    </div>

                    <div class="highlight-box danger">
                        <h3>Problemas Zookeeper</h3>
                        <ul>
                            <li><strong>Lento:</strong> Latencia 200-500ms</li>
                            <li><strong>Limitado:</strong> ~200K particiones max</li>
                            <li><strong>Fr√°gil:</strong> Failover 3-5 minutos</li>
                            <li><strong>Complejo:</strong> Dos sistemas independientes</li>
                            <li><strong>Costoso:</strong> Infraestructura duplicada</li>
                            <li><strong>Deprecado:</strong> Eliminado en Kafka 4.0</li>
                        </ul>
                    </div>
                </div>

                <div class="summary-box secondary">
                    <h3>Acci√≥n Requerida</h3>
                    <p>
                        Si tu infraestructura Kafka a√∫n usa Zookeeper, <strong>la migraci√≥n a KRaft no es opcional</strong>.
                        Con Kafka 4.0 eliminando soporte de Zookeeper completamente, todos los cl√∫steres deben migrar antes de
                        actualizar a la pr√≥xima versi√≥n major.
                    </p>
                    <p>
                        <strong>Recomendaci√≥n:</strong> Planificar migraci√≥n en Q1-Q2 2025, usando Kafka 3.6+ que incluye
                        herramientas de migraci√≥n maduras y probadas en producci√≥n por los mayores usuarios de Kafka del mundo.
                    </p>
                </div>
            </section>
        </main>

        <footer>
            <div class="footer-content">
                <div class="footer-section">
                    <h3>iLERNA</h3>
                    <p>Curso de Especializaci√≥n en Inteligencia Artificial y Big Data</p>
                    <p><a href="https://www.ilerna.es/" target="_blank">www.ilerna.es</a></p>
                </div>
                <div class="footer-section">
                    <p>Centro oficial de FP online y presencial</p>
                    <p>Ciclos formativos de Grado Medio y Grado Superior</p>
                    <p>Titulaciones 100% oficiales</p>
                </div>
                <div class="footer-penguin">
                    <span class="penguin" title="Di adi√≥s a Zookeeper, bienvenido KRaft">üêß</span>
                    <p>Di adi√≥s a Zookeeper, bienvenido KRaft</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-properties.min.js"></script>
    <script src="../js/copy-code.js"></script>
    <script src="../js/lecciones.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>

</html>
