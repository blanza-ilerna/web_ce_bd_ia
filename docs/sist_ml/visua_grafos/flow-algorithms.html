<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algoritmos de Flujo en Redes | Ford-Fulkerson & Edmonds-Karp</title>
    <script src="https://unpkg.com/d3@7.8.5/dist/d3.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <div class="logo-header">
            <img src="img/ilerna-logo.svg" alt="iLERNA Logo" class="ilerna-logo">
        </div>
        <header>
            <h1>üíß Algoritmos de Flujo en Redes</h1>
            <p class="subtitle">Visualizaci√≥n interactiva de Ford-Fulkerson, Edmonds-Karp y Dinic</p>
        </header>

        <!-- Visualizaci√≥n del Grafo - Ocupa todo el ancho -->
        <div class="graph-section">
            <div class="section-title">
                <span class="icon">üìä</span>
                Red de flujo de ejemplo
            </div>
            <div id="graph-container"></div>
            <div class="graph-footer">
                <div class="footer-left">
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-dot default"></div>
                            <span>Sin visitar</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot queued" id="legendQueued"></div>
                            <span id="legendQueuedText">En cola</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot current-bfs" id="legendCurrent"></div>
                            <span>Nodo actual</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot visited"></div>
                            <span>Visitado</span>
                        </div>
                    </div>

                    <div class="visit-order-inline">
                        <div class="visit-order-label">‚úÖ Camino de aumento:</div>
                        <div class="visit-order" id="visitOrder"></div>
                    </div>

                    <div class="data-structure-inline">
                        <div class="structure-header-inline">
                            <span class="structure-label">üóÉÔ∏è Estructura:</span>
                            <span class="structure-type bfs-type" id="structureType">DFS</span>
                            <span class="structure-indicator" id="structureIndicator">Pila</span>
                        </div>
                        <div class="structure-items" id="structureItems"></div>
                    </div>
                </div>

                <div class="footer-right">
                    <div class="inline-controls">
                        <div class="controls">
                            <button class="control-btn primary" id="startBtn" onclick="startSearch()">
                                ‚ñ∂ Iniciar
                            </button>
                            <button class="control-btn" id="stepBtn" onclick="stepSearch()">
                                ‚è≠<br>Paso
                            </button>
                            <button class="control-btn" id="resetBtn" onclick="resetGraph()">
                                ‚Ü∫ Reset
                            </button>
                        </div>
                        <div class="speed-control" id="speedControl">
                            <label>Velocidad</label>
                            <input type="range" id="speedSlider" min="100" max="2000" value="800" onchange="updateSpeed()">
                        </div>
                    </div>

                    <div class="inline-progress">
                        <div class="step-counter">
                            <div class="label">Paso</div>
                            <span class="current" id="stepNumber">0</span>
                            <span class="total">/ <span id="totalSteps">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Algoritmo y Variantes - Layout horizontal -->
        <div class="algorithm-section">
            <div class="algorithm-row">
                <div class="algorithm-selector-horizontal">
                    <div class="section-label">‚öôÔ∏è Algoritmo:</div>
                    <button class="algo-btn bfs active" onclick="selectAlgorithm('ford-fulkerson')">
                        Ford-Fulkerson
                        <span class="algo-label">Flujo m√°ximo</span>
                    </button>
                    <button class="algo-btn dfs" onclick="selectAlgorithm('edmonds-karp')">
                        Edmonds-Karp
                        <span class="algo-label">FF con BFS</span>
                    </button>
                    <button class="algo-btn dfs" onclick="selectAlgorithm('dinic')">
                        Dinic
                        <span class="algo-label">Level graph</span>
                    </button>
                </div>

                <div class="variants-selector-horizontal" id="fordFulkersonVariantPanel">
                    <div class="section-label">üîÄ Variante:</div>
                    <button class="variant-btn-h active" onclick="selectFordFulkersonVariant('standard')">Est√°ndar (con DFS)</button>
                    <button class="variant-btn-h" onclick="selectFordFulkersonVariant('step-by-step')">Paso a Paso</button>
                    <button class="variant-btn-h" onclick="selectFordFulkersonVariant('augmenting-paths')">Caminos de Aumento</button>
                </div>

                <div class="variants-selector-horizontal hidden" id="edmondsKarpVariantPanel">
                    <div class="section-label">üîÄ Variante:</div>
                    <button class="variant-btn-h-dfs active" onclick="selectEdmondsKarpVariant('standard')">Est√°ndar (con BFS)</button>
                    <button class="variant-btn-h-dfs" onclick="selectEdmondsKarpVariant('comparison')">Comparaci√≥n con Ford-Fulkerson</button>
                    <button class="variant-btn-h-dfs" onclick="selectEdmondsKarpVariant('optimized')">Optimizado</button>
                </div>

                <div class="variants-selector-horizontal hidden" id="dinicVariantPanel">
                    <div class="section-label">üîÄ Variante:</div>
                    <button class="variant-btn-h-dfs active" onclick="selectDinicVariant('standard')">Est√°ndar (con level graph)</button>
                    <button class="variant-btn-h-dfs" onclick="selectDinicVariant('blocking-flow')">Blocking Flow</button>
                    <button class="variant-btn-h-dfs" onclick="selectDinicVariant('performance')">Comparaci√≥n de rendimiento</button>
                </div>
            </div>
        </div>

        <!-- Pseudoc√≥digo y Explicaci√≥n -->
        <div class="code-explanation-layout">
            <div class="panel pseudocode-panel">
                <div class="panel-title">üíª Pseudoc√≥digo</div>
                <div class="pseudocode" id="pseudocode">
                    <div class="line" data-line="1"><span class="keyword">Ford-Fulkerson</span>(grafo, fuente, sumidero):</div>
                    <div class="line" data-line="2">  flujo_max ‚Üê 0</div>
                    <div class="line" data-line="3">  grafo_residual ‚Üê crear_grafo_residual(grafo)</div>
                    <div class="line" data-line="4">  <span class="keyword">mientras</span> existe camino de aumento:</div>
                    <div class="line" data-line="5">    camino ‚Üê DFS(grafo_residual, fuente, sumidero)</div>
                    <div class="line" data-line="6">    <span class="keyword">si</span> no camino: <span class="keyword">romper</span></div>
                    <div class="line" data-line="7">    flujo_camino ‚Üê min(capacidades residuales en camino)</div>
                    <div class="line" data-line="8">    <span class="keyword">para cada</span> arista en camino:</div>
                    <div class="line" data-line="9">      grafo_residual[u][v] ‚Üê grafo_residual[u][v] - flujo_camino</div>
                    <div class="line" data-line="10">      grafo_residual[v][u] ‚Üê grafo_residual[v][u] + flujo_camino</div>
                    <div class="line" data-line="11">    flujo_max ‚Üê flujo_max + flujo_camino</div>
                    <div class="line" data-line="12">  <span class="keyword">retornar</span> flujo_max</div>
                </div>
            </div>

            <div class="panel explanation-panel">
                <div class="panel-title">üìñ Explicaci√≥n</div>
                <div class="algorithm-explanation" id="algorithmExplanation">
                    <h4>Ford-Fulkerson Est√°ndar</h4>
                    <p>Encuentra el flujo m√°ximo desde una fuente a un sumidero en una red de flujo.</p>
                    <ul>
                        <li><strong>Estructura:</strong> DFS para encontrar caminos de aumento</li>
                        <li><strong>Aplicaci√≥n:</strong> Redes de transporte, asignaci√≥n de recursos, matching bipartito</li>
                        <li><strong>Complejidad:</strong> O(E √ó f) donde f es el flujo m√°ximo</li>
                        <li><strong>Teorema:</strong> Max-Flow Min-Cut: el flujo m√°ximo = corte m√≠nimo</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Comparativa de algoritmos - Al final -->
        <div class="explanation-section">
            <div class="section-title">
                <span class="icon">üìö</span>
                Comparativa de algoritmos de flujo
            </div>
            <div class="algo-explanations">
                <div class="algo-card bfs-card">
                    <h3>üåä Ford-Fulkerson</h3>
                    <p><strong>M√©todo del camino de aumento:</strong> Encuentra el flujo m√°ximo iterativamente buscando caminos de aumento con DFS.</p>
                    <span class="structure-badge">üì• DFS (Pila)</span>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #49B9CE;">Caracter√≠sticas Principales:</h4>
                    <ul>
                        <li>Utiliza <strong>DFS</strong> para encontrar caminos de aumento</li>
                        <li>Construye un <strong>grafo residual</strong> din√°micamente</li>
                        <li>No garantiza tiempo polinomial en el peor caso</li>
                        <li>Complejidad depende del valor del flujo m√°ximo</li>
                    </ul>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #49B9CE;">Variantes Implementadas:</h4>
                    <ul style="font-size: 0.8rem;">
                        <li><strong>Est√°ndar (con DFS):</strong> Implementaci√≥n cl√°sica con b√∫squeda en profundidad</li>
                        <li><strong>Paso a Paso:</strong> Visualiza cada iteraci√≥n del algoritmo</li>
                        <li><strong>Caminos de Aumento:</strong> Muestra todos los caminos encontrados</li>
                    </ul>

                    <div class="complexity">
                        <strong>Complejidad:</strong> O(E √ó f) donde f es el flujo m√°ximo | O(V) espacio
                    </div>
                </div>
                <div class="algo-card dfs-card">
                    <h3>‚ö° Edmonds-Karp</h3>
                    <p><strong>Ford-Fulkerson con BFS:</strong> Variante que usa BFS para encontrar el camino de aumento m√°s corto.</p>
                    <span class="structure-badge">üìö BFS (Cola)</span>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #8A7AAF;">Caracter√≠sticas Principales:</h4>
                    <ul>
                        <li>Utiliza <strong>BFS</strong> en lugar de DFS</li>
                        <li>Encuentra el camino con <strong>menos aristas</strong></li>
                        <li>Garantiza tiempo <strong>polinomial</strong></li>
                        <li>M√°s predecible que Ford-Fulkerson</li>
                    </ul>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #8A7AAF;">Variantes Implementadas:</h4>
                    <ul style="font-size: 0.8rem;">
                        <li><strong>Est√°ndar (con BFS):</strong> Implementaci√≥n cl√°sica de Edmonds-Karp</li>
                        <li><strong>Comparaci√≥n con Ford-Fulkerson:</strong> Visualiza diferencias en la b√∫squeda</li>
                        <li><strong>Optimizado:</strong> Con optimizaciones de implementaci√≥n</li>
                    </ul>

                    <div class="complexity">
                        <strong>Complejidad:</strong> O(V √ó E¬≤) tiempo | O(V) espacio
                    </div>
                </div>
                <div class="algo-card" style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-left: 4px solid #0ea5e9;">
                    <h3>üöÄ Dinic</h3>
                    <p><strong>Level graph y blocking flow:</strong> Algoritmo m√°s eficiente usando grafos de niveles y flujos bloqueantes.</p>
                    <span class="structure-badge" style="background: #e0f2fe; color: #0369a1;">üìä Level Graph + DFS</span>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #0ea5e9;">Caracter√≠sticas Principales:</h4>
                    <ul>
                        <li>Construye un <strong>level graph</strong> con BFS</li>
                        <li>Encuentra <strong>blocking flows</strong> con DFS</li>
                        <li>Mucho m√°s eficiente que Edmonds-Karp</li>
                        <li>Utilizado en aplicaciones de alto rendimiento</li>
                    </ul>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #0ea5e9;">Variantes Implementadas:</h4>
                    <ul style="font-size: 0.8rem;">
                        <li><strong>Est√°ndar (con level graph):</strong> Implementaci√≥n completa de Dinic</li>
                        <li><strong>Blocking Flow:</strong> Visualiza la b√∫squeda de flujos bloqueantes</li>
                        <li><strong>Comparaci√≥n de rendimiento:</strong> Compara con otros algoritmos</li>
                    </ul>

                    <div class="complexity">
                        <strong>Complejidad:</strong> O(V¬≤ √ó E) tiempo | O(V + E) espacio
                    </div>
                </div>
            </div>
        </div>

        <!-- Teorema Max-Flow Min-Cut -->
        <div class="explanation-section">
            <div class="section-title">
                <span class="icon">üéì</span>
                Teorema Max-Flow Min-Cut
            </div>
            <div class="algo-explanations">
                <div class="algo-card" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b;">
                    <h3>‚öñÔ∏è Teorema Fundamental</h3>
                    <p><strong>El flujo m√°ximo es igual al corte m√≠nimo:</strong> En cualquier red de flujo, el valor del flujo m√°ximo desde la fuente al sumidero es igual a la capacidad del corte m√≠nimo.</p>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #d97706;">Definiciones:</h4>
                    <ul>
                        <li><strong>Flujo:</strong> Asignaci√≥n de valores a las aristas que respeta las capacidades y conservaci√≥n</li>
                        <li><strong>Corte:</strong> Partici√≥n de nodos en dos conjuntos S y T (fuente ‚àà S, sumidero ‚àà T)</li>
                        <li><strong>Capacidad del corte:</strong> Suma de capacidades de aristas de S a T</li>
                    </ul>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #d97706;">Implicaciones:</h4>
                    <ul style="font-size: 0.8rem;">
                        <li>Todo flujo es menor o igual que todo corte</li>
                        <li>Si encontramos un flujo igual a un corte, ambos son √≥ptimos</li>
                        <li>Los algoritmos de flujo encuentran impl√≠citamente el corte m√≠nimo</li>
                    </ul>
                </div>

                <div class="algo-card" style="background: linear-gradient(135deg, #f3e8ff 0%, #e9d5ff 100%); border-left: 4px solid #a855f7;">
                    <h3>üìê Grafo Residual</h3>
                    <p><strong>Representaci√≥n de capacidades disponibles:</strong> El grafo residual muestra qu√© flujo adicional puede enviarse por cada arista.</p>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #9333ea;">Construcci√≥n:</h4>
                    <ul>
                        <li><strong>Capacidad residual directa:</strong> capacidad - flujo actual</li>
                        <li><strong>Capacidad residual inversa:</strong> flujo actual (permite "deshacer" flujo)</li>
                        <li><strong>Camino de aumento:</strong> Camino de s a t con capacidad residual > 0</li>
                    </ul>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #9333ea;">Propiedades:</h4>
                    <ul style="font-size: 0.8rem;">
                        <li>Se actualiza despu√©s de cada aumento de flujo</li>
                        <li>Las aristas inversas permiten corregir decisiones sub√≥ptimas</li>
                        <li>El algoritmo termina cuando no hay m√°s caminos de aumento</li>
                    </ul>
                </div>

                <div class="algo-card" style="background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); border-left: 4px solid #22c55e;">
                    <h3>üîç Conservaci√≥n de Flujo</h3>
                    <p><strong>Ley de conservaci√≥n:</strong> En cada nodo (excepto fuente y sumidero), el flujo entrante debe ser igual al flujo saliente.</p>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #16a34a;">Restricciones:</h4>
                    <ul>
                        <li><strong>Capacidad:</strong> 0 ‚â§ flujo(u,v) ‚â§ capacidad(u,v)</li>
                        <li><strong>Conservaci√≥n:</strong> ‚àë flujo_in(v) = ‚àë flujo_out(v) para v ‚â† s,t</li>
                        <li><strong>Antisimetr√≠a:</strong> flujo(u,v) = -flujo(v,u)</li>
                    </ul>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #16a34a;">Verificaci√≥n:</h4>
                    <ul style="font-size: 0.8rem;">
                        <li>El flujo total que sale de la fuente = flujo total que entra al sumidero</li>
                        <li>Ning√∫n nodo acumula o genera flujo</li>
                        <li>Todas las capacidades se respetan</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Aplicaciones -->
        <div class="explanation-section">
            <div class="section-title">
                <span class="icon">üéØ</span>
                Aplicaciones de los Algoritmos de Flujo
            </div>
            <div class="algo-explanations">
                <div class="algo-card bfs-card">
                    <h3>üöö Redes de Transporte</h3>
                    <ul>
                        <li><strong>Log√≠stica:</strong> Maximizar el transporte de mercanc√≠as entre ciudades</li>
                        <li><strong>Tr√°fico:</strong> Optimizar flujo de veh√≠culos en carreteras</li>
                        <li><strong>Distribuci√≥n:</strong> Planificar rutas de entrega √≥ptimas</li>
                        <li><strong>Tuber√≠as:</strong> Calcular capacidad m√°xima de redes de agua/gas</li>
                    </ul>
                </div>

                <div class="algo-card dfs-card">
                    <h3>üíº Asignaci√≥n de Recursos</h3>
                    <ul>
                        <li><strong>Matching bipartito:</strong> Asignar trabajadores a tareas</li>
                        <li><strong>Scheduling:</strong> Programaci√≥n de horarios y recursos</li>
                        <li><strong>Load balancing:</strong> Distribuci√≥n de carga en servidores</li>
                        <li><strong>Asignaci√≥n de personal:</strong> Optimizar equipos de trabajo</li>
                    </ul>
                </div>

                <div class="algo-card" style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-left: 4px solid #0ea5e9;">
                    <h3>üåê Redes y Telecomunicaciones</h3>
                    <ul>
                        <li><strong>Bandwidth:</strong> Maximizar ancho de banda en redes</li>
                        <li><strong>Routing:</strong> Enrutamiento √≥ptimo de paquetes</li>
                        <li><strong>Network design:</strong> Dise√±o de topolog√≠as de red</li>
                        <li><strong>CDN:</strong> Distribuci√≥n de contenido eficiente</li>
                    </ul>
                </div>

                <div class="algo-card" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-left: 4px solid #f59e0b;">
                    <h3>üî¨ Otras Aplicaciones</h3>
                    <ul>
                        <li><strong>Image segmentation:</strong> Separaci√≥n de objetos en im√°genes (min-cut)</li>
                        <li><strong>Baseball elimination:</strong> Determinar si un equipo puede ganar</li>
                        <li><strong>Circulation:</strong> Problemas de circulaci√≥n con demandas</li>
                        <li><strong>Survey design:</strong> Optimizaci√≥n de encuestas y muestreo</li>
                    </ul>
                </div>
            </div>
        </div>

        <footer>
            <div class="penguin">üêß</div>

            <div style="margin-bottom: 1.5rem;">
                <h3>iLERNA</h3>
                <p class="course-title">Curso de Especializaci√≥n en Inteligencia Artificial y Big Data</p>
                <a href="https://www.ilerna.es/" target="_blank">www.ilerna.es</a>
            </div>

            <p class="info-text">Centro oficial de FP online y presencial. Ciclos formativos de Grado Medio y Grado Superior.</p>
            <p class="info-text">¬°Titulaciones 100% oficiales. Sin pruebas libres!</p>
        </footer>
    </div>

    <script src="js/flow-algorithms.js"></script>
</body>
</html>
