<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algoritmos MST | Prim & Kruskal</title>
    <script src="https://unpkg.com/d3@7.8.5/dist/d3.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <div class="logo-header">
            <img src="img/ilerna-logo.svg" alt="iLERNA Logo" class="ilerna-logo">
        </div>
        <header>
            <h1>üå≥ Algoritmos MST - √Årboles de Expansi√≥n M√≠nima</h1>
            <p class="subtitle">Visualizaci√≥n interactiva de Prim y Kruskal</p>
        </header>

        <!-- Visualizaci√≥n del Grafo - Ocupa todo el ancho -->
        <div class="graph-section">
            <div class="section-title">
                <span class="icon">üìä</span>
                Grafo ponderado de ejemplo
            </div>
            <div id="graph-container"></div>
            <div class="graph-footer">
                <div class="footer-left">
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-dot default"></div>
                            <span>Sin visitar</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot queued" id="legendQueued"></div>
                            <span id="legendQueuedText">En cola</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot current-bfs" id="legendCurrent"></div>
                            <span>Nodo actual</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot visited"></div>
                            <span>Visitado</span>
                        </div>
                    </div>

                    <div class="visit-order-inline">
                        <div class="visit-order-label">‚úÖ Orden de visita:</div>
                        <div class="visit-order" id="visitOrder"></div>
                    </div>

                    <div class="data-structure-inline">
                        <div class="structure-header-inline">
                            <span class="structure-label">üóÉÔ∏è Estructura:</span>
                            <span class="structure-type bfs-type" id="structureType">Cola de Prioridad</span>
                            <span class="structure-indicator" id="structureIndicator">Min-Heap</span>
                        </div>
                        <div class="structure-items" id="structureItems"></div>
                    </div>
                </div>

                <div class="footer-right">
                    <div class="inline-controls">
                        <div class="controls">
                            <button class="control-btn primary" id="startBtn" onclick="startSearch()">
                                ‚ñ∂ Iniciar
                            </button>
                            <button class="control-btn" id="stepBtn" onclick="stepSearch()">
                                ‚è≠<br>Paso
                            </button>
                            <button class="control-btn" id="resetBtn" onclick="resetGraph()">
                                ‚Ü∫ Reset
                            </button>
                        </div>
                        <div class="speed-control" id="speedControl">
                            <label>Velocidad</label>
                            <input type="range" id="speedSlider" min="100" max="2000" value="800" onchange="updateSpeed()">
                        </div>
                    </div>

                    <div class="inline-progress">
                        <div class="step-counter">
                            <div class="label">Paso</div>
                            <span class="current" id="stepNumber">0</span>
                            <span class="total">/ <span id="totalSteps">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Algoritmo y Variantes - Layout horizontal -->
        <div class="algorithm-section">
            <div class="algorithm-row">
                <div class="algorithm-selector-horizontal">
                    <div class="section-label">‚öôÔ∏è Algoritmo:</div>
                    <button class="algo-btn bfs active" onclick="selectAlgorithm('prim')">
                        Prim
                        <span class="algo-label">Cola de prioridad</span>
                    </button>
                    <button class="algo-btn dfs" onclick="selectAlgorithm('kruskal')">
                        Kruskal
                        <span class="algo-label">Union-Find</span>
                    </button>
                </div>

                <div class="variants-selector-horizontal" id="primVariantPanel">
                    <div class="section-label">üîÄ Variante:</div>
                    <button class="variant-btn-h active" onclick="selectPrimVariant('standard')">Est√°ndar</button>
                    <button class="variant-btn-h" onclick="selectPrimVariant('dense')">Grafo Denso</button>
                    <button class="variant-btn-h" onclick="selectPrimVariant('step-by-step')">Paso a Paso</button>
                </div>

                <div class="variants-selector-horizontal hidden" id="kruskalVariantPanel">
                    <div class="section-label">üîÄ Variante:</div>
                    <button class="variant-btn-h-dfs active" onclick="selectKruskalVariant('standard')">Est√°ndar</button>
                    <button class="variant-btn-h-dfs" onclick="selectKruskalVariant('cycle-detection')">Detecci√≥n de Ciclos</button>
                    <button class="variant-btn-h-dfs" onclick="selectKruskalVariant('comparison')">Comparaci√≥n con Prim</button>
                </div>
            </div>
        </div>

        <!-- Pseudoc√≥digo y Explicaci√≥n -->
        <div class="code-explanation-layout">
            <div class="panel pseudocode-panel">
                <div class="panel-title">üíª Pseudoc√≥digo</div>
                <div class="pseudocode" id="pseudocode">
                    <div class="line" data-line="1"><span class="keyword">Prim</span>(grafo, inicio):</div>
                    <div class="line" data-line="2">  MST ‚Üê ‚àÖ</div>
                    <div class="line" data-line="3">  visitados ‚Üê {inicio}</div>
                    <div class="line" data-line="4">  aristas ‚Üê todas las aristas desde inicio</div>
                    <div class="line" data-line="5">  cola_prioridad ‚Üê aristas ordenadas por peso</div>
                    <div class="line" data-line="6">  <span class="keyword">mientras</span> |MST| < V-1:</div>
                    <div class="line" data-line="7">    arista ‚Üê cola.<span class="keyword">extraer_min()</span></div>
                    <div class="line" data-line="8">    (u, v, peso) ‚Üê arista</div>
                    <div class="line" data-line="9">    <span class="keyword">si</span> v no est√° en visitados:</div>
                    <div class="line" data-line="10">      MST.<span class="keyword">agregar</span>(arista)</div>
                    <div class="line" data-line="11">      visitados.<span class="keyword">agregar</span>(v)</div>
                    <div class="line" data-line="12">      <span class="keyword">para cada</span> arista desde v:</div>
                    <div class="line" data-line="13">        cola.<span class="keyword">insertar</span>(arista)</div>
                    <div class="line" data-line="14">  <span class="keyword">retornar</span> MST</div>
                </div>
            </div>

            <div class="panel explanation-panel">
                <div class="panel-title">üìñ Explicaci√≥n</div>
                <div class="algorithm-explanation" id="algorithmExplanation">
                    <h4>Prim Est√°ndar</h4>
                    <p>Construye un √°rbol de expansi√≥n m√≠nima (MST) comenzando desde un nodo y expandi√©ndose gradualmente agregando la arista de menor peso que conecte un nodo visitado con uno no visitado.</p>
                    <ul>
                        <li><strong>Estructura:</strong> Cola de prioridad (Min-Heap) para aristas</li>
                        <li><strong>Aplicaci√≥n:</strong> Redes el√©ctricas, telecomunicaciones, clustering</li>
                        <li><strong>Complejidad:</strong> O(E log V) con heap binario</li>
                        <li><strong>Ventaja:</strong> Eficiente para grafos densos con matriz de adyacencia</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Comparativa de algoritmos - Al final -->
        <div class="explanation-section">
            <div class="section-title">
                <span class="icon">üìö</span>
                Comparativa de algoritmos MST
            </div>
            <div class="algo-explanations">
                <div class="algo-card bfs-card">
                    <h3>üå≤ Prim</h3>
                    <p><strong>Construcci√≥n incremental del MST:</strong> Comienza desde un nodo y expande el √°rbol seleccionando aristas de peso m√≠nimo.</p>
                    <span class="structure-badge">üì• Cola de Prioridad (Min-Heap)</span>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #49B9CE;">Caracter√≠sticas Principales:</h4>
                    <ul>
                        <li>Mantiene un <strong>√°rbol conectado</strong> en todo momento</li>
                        <li>Selecciona la <strong>arista de menor peso</strong> que conecta el √°rbol con un nodo externo</li>
                        <li>M√°s eficiente para <strong>grafos densos</strong> (muchas aristas)</li>
                        <li>Utiliza cola de prioridad para seleccionar aristas √≥ptimas</li>
                    </ul>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #49B9CE;">Variantes Implementadas:</h4>
                    <ul style="font-size: 0.8rem;">
                        <li><strong>Est√°ndar:</strong> Con cola de prioridad para grafos sparse</li>
                        <li><strong>Grafo Denso:</strong> Optimizado con matriz de adyacencia</li>
                        <li><strong>Paso a Paso:</strong> Visualizaci√≥n detallada del proceso</li>
                    </ul>

                    <div class="complexity">
                        <strong>Complejidad:</strong> O(E log V) con heap | O(V¬≤) con matriz
                    </div>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #49B9CE;">Cu√°ndo usar Prim:</h4>
                    <ul style="font-size: 0.85rem;">
                        <li>Grafos <strong>densos</strong> (E ‚âà V¬≤)</li>
                        <li>Cuando se puede usar <strong>matriz de adyacencia</strong></li>
                        <li>Cuando se conoce el <strong>nodo de inicio</strong></li>
                        <li>Grafos donde E >> V</li>
                    </ul>
                </div>
                <div class="algo-card dfs-card">
                    <h3>üîó Kruskal</h3>
                    <p><strong>Ordenaci√≥n global de aristas:</strong> Ordena todas las aristas por peso y las agrega una por una evitando ciclos.</p>
                    <span class="structure-badge">üìö Union-Find (Disjoint Set)</span>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #8A7AAF;">Caracter√≠sticas Principales:</h4>
                    <ul>
                        <li>Trabaja con <strong>aristas ordenadas</strong> globalmente</li>
                        <li>Usa <strong>Union-Find</strong> para detectar ciclos eficientemente</li>
                        <li>M√°s eficiente para <strong>grafos sparse</strong> (pocas aristas)</li>
                        <li>No requiere que el grafo sea conectado inicialmente</li>
                    </ul>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #8A7AAF;">Variantes Implementadas:</h4>
                    <ul style="font-size: 0.8rem;">
                        <li><strong>Est√°ndar:</strong> Con Union-Find optimizado</li>
                        <li><strong>Detecci√≥n de Ciclos:</strong> Muestra c√≥mo se evitan ciclos</li>
                        <li><strong>Comparaci√≥n con Prim:</strong> An√°lisis lado a lado</li>
                    </ul>

                    <div class="complexity">
                        <strong>Complejidad:</strong> O(E log E) o O(E log V) tiempo
                    </div>

                    <h4 style="margin-top: 1rem; margin-bottom: 0.5rem; font-size: 0.9rem; color: #8A7AAF;">Cu√°ndo usar Kruskal:</h4>
                    <ul style="font-size: 0.85rem;">
                        <li>Grafos <strong>sparse</strong> (E << V¬≤)</li>
                        <li>Cuando se usa <strong>lista de aristas</strong></li>
                        <li>Cuando las aristas ya est√°n <strong>ordenadas</strong></li>
                        <li>Para encontrar MST de <strong>componentes desconectadas</strong></li>
                    </ul>
                </div>
            </div>

            <div style="margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, #fff9e6 0%, #fff4d6 100%); border-left: 4px solid #f59e0b; border-radius: 8px;">
                <h3 style="margin-top: 0; color: #ea580c; display: flex; align-items: center; gap: 0.5rem;">
                    <span>‚öñÔ∏è</span> Prim vs Kruskal: ¬øCu√°l elegir?
                </h3>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1rem;">
                    <div>
                        <h4 style="color: #49B9CE; margin-bottom: 0.5rem;">‚úÖ Usa Prim si:</h4>
                        <ul style="font-size: 0.9rem; line-height: 1.6;">
                            <li>El grafo es <strong>denso</strong> (muchas aristas)</li>
                            <li>Tienes una <strong>matriz de adyacencia</strong></li>
                            <li>Necesitas empezar desde un nodo espec√≠fico</li>
                            <li>E es cercano a V¬≤</li>
                        </ul>
                    </div>

                    <div>
                        <h4 style="color: #8A7AAF; margin-bottom: 0.5rem;">‚úÖ Usa Kruskal si:</h4>
                        <ul style="font-size: 0.9rem; line-height: 1.6;">
                            <li>El grafo es <strong>sparse</strong> (pocas aristas)</li>
                            <li>Tienes una <strong>lista de aristas</strong></li>
                            <li>Las aristas ya est√°n ordenadas</li>
                            <li>El grafo puede tener m√∫ltiples componentes</li>
                        </ul>
                    </div>
                </div>

                <div style="margin-top: 1.5rem; padding: 1rem; background: white; border-radius: 6px; border: 1px solid #fed7aa;">
                    <strong style="color: #ea580c;">üí° Nota importante:</strong>
                    <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem; line-height: 1.5;">
                        Ambos algoritmos producen el mismo resultado (un MST del mismo peso total), pero difieren en su enfoque:
                        <strong>Prim</strong> crece un √°rbol desde un punto, mientras que <strong>Kruskal</strong> une bosques hasta formar un √°rbol.
                        La elecci√≥n depende de la estructura de datos y la densidad del grafo.
                    </p>
                </div>
            </div>
        </div>

        <footer>
            <div class="penguin">üêß</div>

            <div style="margin-bottom: 1.5rem;">
                <h3>iLERNA</h3>
                <p class="course-title">Curso de Especializaci√≥n en Inteligencia Artificial y Big Data</p>
                <a href="https://www.ilerna.es/" target="_blank">www.ilerna.es</a>
            </div>

            <p class="info-text">Centro oficial de FP online y presencial. Ciclos formativos de Grado Medio y Grado Superior.</p>
            <p class="info-text">¬°Titulaciones 100% oficiales. Sin pruebas libres!</p>
        </footer>
    </div>

    <script src="js/mst-algorithms.js"></script>
</body>
</html>
